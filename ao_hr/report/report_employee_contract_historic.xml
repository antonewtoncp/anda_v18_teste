<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <report
                id="report_employee_contract_historic"
                model="hr.employee"
                string="Historico de Contractos"
                name="ao_hr.report_employee_contract_historic_pdf"
                file="ao_hr.report_employee_contract_historic_pdf"
                report_type="qweb-pdf"/>

        <template id="report_employee_contract_historic_pdf">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">

                            <style type="text/css">
                                .container2 {
                                height: 8cm;
                                /* Width and count aren't respected, but you
                                have to give at least some dummy value (??). */
                                /* This is the strange way to define the number of columns:
                                50% = 2 columns, 33% = 3 columns 25% = 4 columns */
                                -webkit-columns: 0 0; width: 25%;
                                /* Gap and rule do work. */
                                -webkit-column-gap: 1em;
                                text-align: justify;
                                }
                                .text-center {text-align:center;}
                                .text-left {text-align:left;}
                                .text-right {text-align:right;}
                                .conteudo
                                {
                                border-collapse: collapse;
                                width:100%; font-size:12px;
                                min-height:900px;
                                border-bottom:0px !important;
                                border-top:0px !important;
                                border:none !important;
                                }

                                .table-borderless{
                                border-bottom:0px !important;
                                border-top:0px !important;
                                border:none !important;
                                }

                                .table{
                                border-bottom:0px !important;
                                border-top:0px !important;
                                border:none !important;
                                }

                                .conteudo > tr > th, td, th { min-width:12px;
                                line-height: 1;
                                vertical-align: top;
                                padding: 4px !important;
                                margin: 4px !important;
                                border-bottom:0px !important;
                                border-top:0px !important;
                                border:none !important;
                                }

                                .name{width:250px;}
                                .borda{
                                border-bottom: solid 1px #000;
                                border-collapse: separate;
                                }

                            </style>

                            <div class="oe_structure" style="font-size:12px;">

                                <b align="center">
                                    <h3>HISTÓRICO DE CONTRACTOS DO FUNCIONÁRIO</h3>
                                </b>
                                <br/>
                                <div class="col-6">
                                    <table class="table">
                                        <tr>
                                            <td>Funcionário</td>
                                            <td><span t-field="o.name"/></td>
                                        </tr>
                                        <tr>
                                            <td>País</td>
                                            <td><span t-field="o.country_id"/></td>
                                        </tr>
                                        <tr>
                                            <td>Nº Identificação</td>
                                            <td><span t-field="o.identification_id"/></td>
                                        </tr>
                                        <tr>
                                            <td>Telemovel</td>
                                            <td><span t-field="o.mobile_phone"/></td>
                                        </tr>
                                        <tr>
                                            <td>Data de Impressão:</td>
                                            <td><span t-esc="time.strftime('%d-%m-%Y %H:%M:%S')"/></td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="col-6">

                                </div>

                                <div class="col-12">
                                    <br/>

                                    <t t-set="total_salary" t-value="0.0"/>
                                    <table class="table table-condensed conteudo border-collapse">
                                        <tr>
                                            <td colspan="7"
                                                style="font-weight:bold; background-color:#337AB7; color:#ffffff;">
                                                <center>DETALHES</center>
                                            </td>
                                        </tr>
                                        <tr style="font-size: 12px; font-weight:bold;">
                                            <th>Contracto</th>
                                            <th>Cargo</th>
                                            <th>Departamento</th>
                                            <th>Inicio</th>
                                            <th>Fim</th>
                                            <th>Estado</th>
                                            <th>Salário</th>
                                        </tr>
                                        <t t-if="o.get_all_employee_contract()">
                                            <tr style="font-size: 12px;" t-foreach="o.get_all_employee_contract()"
                                                t-as="contract">
                                                <td><span t-field="contract.name"/></td>
                                                <td><span t-field="contract.job_id"/></td>
                                                <td><span t-field="contract.department_id"/></td>
                                                <td><span t-field="contract.date_start"/></td>
                                                <td>
                                                    <t t-if="contract.date_end">
                                                        <span t-field="contract.date_end"/>
                                                    </t>
                                                    <t t-if="not contract.date_end">
                                                        ----------
                                                    </t>
                                                </td>
                                                <td><span t-field="contract.state"/></td>
                                                <td align="right"><span t-field="contract.wage" widget="monetary"/></td>
                                                <t t-set="total_salary"
                                                   t-value="total_salary + contract.wage"/>
                                            </tr>
                                            <tr>
                                                <td colspan="8"><hr/></td>
                                            </tr>
                                            <tr>
                                                <td style="font-size: 14px; font-weight:bold;" colspan="6">
                                                    Total
                                                </td>
                                                <td style="font-size: 14px; font-weight:bold; text-align:right">
                                                    <span t-esc="total_salary"
                                                          t-esc-options='{"widget": "monetary","display_currency": "o.create_uid.company_id.currency_id"}'/>
                                                </td>
                                            </tr>
                                        </t>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

    </data>
</odoo>